<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html data-lt-installed="true" class=" ugyxgipy idc0_341"><head>

  <title>sr01 TD5</title>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta name="GENERATOR" content="Mozilla/3.04Gold (X11; I; SunOS 5.7 sun4u) [Netscape]">

  <meta name="author" content="H. Bettahar">

  <style type="text/css">

    .Style1 {

      color: #006699;

      font-weight: bold;

      font-style: italic;

    }

    .Style2 {color: #006699}

    .Style3 {color: #CC6600}

    .Style5 {color: #CC6600; font-weight: bold; }

  </style></head>

<body vlink="#52188c" link="#0000ef" bgcolor="#FFFFFF" alink="#ff0000">



<center>

  <table width="800">

    <tbody><tr>

      <td width="78">

        <center><p><img src="sujet_files/logo_utc_new.jpg" width="180" height="60" align="MIDDLE"></p></center>

      </td>



      <td>

        <center>

          <p><b><font size="+3" color="#006699">SR01 - TD 5 </font></b></p>

        </center>

        <center>

          <p><b><font size="+3" color="#006699">Fonctions, main(), Bibliothèques</font></b></p>

        </center>

      </td>

    </tr>

    </tbody></table>

  <font size="+3" color="#0000ff"><b><span style="font-style: italic;"></span></b></font>

</center>







<center>

  <hr width="800" align="left">

</center>

<p><span class="Style1"><font size="+1">Ex1&nbsp;: passage de

paramètres à la fonction main().</font></span><b><i><font size="+1" color="#0000ff"><br>
</font></i></b>Ecrire le programme <span style="font-weight: bold; font-style: italic; color: #CC6600;">calcul </span>qui réalise les taches suivantes:<br>

  &nbsp;&nbsp;&nbsp;&nbsp; - la somme de plusieurs réels

  passés en argument dans la ligne de commande&nbsp; avec l'option

  -a&nbsp; (addition)<br>

  &nbsp;&nbsp;&nbsp;&nbsp; - le produit de plusieurs réels

  passés en argument dans la ligne de commande&nbsp; avec l'option

  -p&nbsp; (produit)<br>

  &nbsp;&nbsp;&nbsp;&nbsp; - la division de deux réels

  passés en argument dans la ligne de commande&nbsp; avec l'option

  -d&nbsp; (division)<br>
</p>

<p>Voici un exemple d'appel du programme <br>

  &nbsp;&nbsp;&nbsp; <span style="font-style: italic;">&gt; calcul

-a&nbsp; 10.0 20 15.5</span><br style="font-style: italic;">

  <span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

10.0 +&nbsp; 20.0 +&nbsp; 15.5&nbsp; =&nbsp; 45.0</span> <br>

</p>

<br>

<hr width="800" align="left">

<p><span class="Style2"><b><i><font size="+1">Ex2&nbsp;:

réalisation de la bibliothèque&nbsp; mystrlib.a<br>

</font></i></b><span style="font-style: italic;">fichiers:&nbsp;

mystr.h&nbsp;&nbsp; mystr.c&nbsp;&nbsp; <code>teststring.c&nbsp; </code>libmystr.a</span></span><span style="color: rgb(51, 51, 255);"><br>

<span class="Style2"><br>
But</span></span>: regrouper des

  nouvelles fonctions de manipulation des chaînes de

  caractères dans une <br>

  bibliothèque <span style="font-weight: bold; font-style: italic; color: #CC6600;">libmystr.a</span><span class="Style3">&nbsp;</span>

  les fonctions seront déclar�es dans&nbsp; un fichier

  d'entête&nbsp; <span style="font-style: italic; color: #CC6600;">mystr.h</span>

  ,<br>

  Un programme C qui voudra ensuite utiliser ces fonctions devra faire un

  <span style="font-style: italic; color: #CC6600;">#include "mystr.h"</span><br>

  et sera "linké" avec cette bibliothèque : "<span class="Style5"><code>gcc -o

prog prog.c -L. -lmystr</code></span>".&nbsp;<span style="font-weight: bold;"><br>

<br>
Travail demandé:</span><br>

  <span style="color: #006699;">Etape 1</span> :

  écrire&nbsp; un programme&nbsp; <span style="font-style: italic; font-weight: bold; color: #CC6600;">mystr.c</span>&nbsp;

  qui implementera un ensemble de fonctions pour manipuler des chaines de caractères, <br>
  voici quelques exemples de fonctions que vous pouvez écrire:<br>
  <br>

  &nbsp;&nbsp;&nbsp; <span style="font-style: italic;">void mystrupdown(char *s1, char *s2)</span>&nbsp;
  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; /* inverse les majuscules et les
  minuscules de s1 et retourne le resultat dans s2 exemple:
  s1="TiCtAc"&nbsp; s2="tIcTaC" */<br>

  &nbsp;&nbsp;&nbsp; <span style="font-style: italic;"> void mystrinv(char *s1, char *s2)</span>&nbsp; &nbsp;&nbsp;&nbsp;

  &nbsp; /* inverse la chaîne s1 et retoune le résultat dans

  s2: &nbsp; exemple&nbsp;

  s1="tac" s2="cat" */<br>

  <span style="font-style: italic;">&nbsp;&nbsp;&nbsp;

int&nbsp;&nbsp;&nbsp;&nbsp; mystrchrn(char *s, char c)&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; /* retourne le nombre

  d'occurrences de c dans&nbsp; la chaîne s */<br>
  &nbsp;&nbsp;&nbsp; <span style="font-style: italic;"> void mystrncpy(char *s1, char *s2, int n)</span>&nbsp; &nbsp;&nbsp;&nbsp; /* copie les n derniers caractères de s1 dans s2 et retourne s2 */<br>
  &nbsp;&nbsp;&nbsp; <span style="font-style: italic;">void mystrncat(char *s1, char *s2, int n)&nbsp;</span>&nbsp; &nbsp;&nbsp; /* concatène au plus les n derniers caractères de s1 à la chaîne s2 */<br>
  &nbsp;&nbsp;&nbsp;<span style="font-style: italic;"> </span>&nbsp;&nbsp;&nbsp;.....
  &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
  &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
  &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
  &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
  &nbsp;&nbsp; &nbsp;&nbsp; /*<span style="font-style: italic;"> vous pouvez ajouter éventuellement

  d'autres fonctions</span>*/<br>

  <br>
  Ce programme, ainsi que tous les programmes qui, par la suite, feront

  appel à cette bibliothèque de fonctions, <br>
  devront faire un <code>#include</code> du fichier <code>"mystr.h"</code> dont le contenu est ci-dessous :<br>

  <br>

  <span style="font-style: italic; font-weight: bold;">/*fichier

  d'entête&nbsp; mystr.h*/</span><br>

  <code>#include &lt;stdio.h&gt;<br>
    #include &lt;stdlib.h&gt;<br>
    #include &lt;string.h&gt;<br>

    #include ....<br>

  </code><code>#define ....<br>

  </code></p>
<p><span style="font-style: italic;">void &nbsp; mystrupdown(char *s1, char *s2);</span><br>
  <span style="font-style: italic;">void &nbsp; mystrinv(char *s1, char *s2)</span>;<br>
  <span style="font-style: italic;">int&nbsp;&nbsp;&nbsp;&nbsp; mystrchrn(char *s, char c);</span><br>
  <span style="font-style: italic;">void &nbsp;  mystrncpy(char *s1, char *s2, int n);</span><br>
  <span style="font-style: italic;">void &nbsp; mystrncat(char *s1, char *s2, int n);</span><br>
  ..... <span style="font-style: italic;"><span style="font-style: italic;"><br>

</span></span> </p>
<span style="color: #006699;">Etape2</span>: Archiver ces

fonctions dans la bibliothèque&nbsp; <span style="font-weight: bold; font-style: italic; color: #CC6600;">libmystr.a</span><span class="Style3">&nbsp;</span>

pour cela il faut:<br>

<br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; - compiler

votre code source<span style="font-style: italic;"> mystr.c</span> avec

l'option -c pour

obtenir l'objet <span style="font-style: italic;">mystr.o</span><br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp; <span style="font-style: italic; color: #CC6600; font-weight: bold;">&gt; gcc -c&nbsp;

mystr.c</span><br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; - ajouter ce

programme dans la bibliothèque&nbsp;<span style="font-style: italic;"> libmystr.a</span><br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp;<span style="font-style: italic; color: #CC6600; font-weight: bold;"> &gt; ar&nbsp; rvs&nbsp;

libmystr.a&nbsp;&nbsp; mystr.o</span><br>

La bibliothèque est créée si elle n'existait pas.

Si "<code>mystr.o</code>" était déjà dans la

bibliothèque "<code>libmystr.a</code>", <br>

celui-ci est remplacé par le nouvel objet.<br>

Les fonctions de la bibliothèque peuvent être

listées par la commande "<span class="Style3"><code>nm -s libmystr.a</code></span>".<br>

<br>

<span style="color: #006699;">Etape3</span>: Ecrire un

programmes de test<span style="font-style: italic;">&nbsp; teststring.c</span>&nbsp;

qui permet de tester l'ensemble des fonctions de la bibliothèque.<br>

ce programme doit faire un <span style="font-style: italic;">#include

"mystr.h"&nbsp; </span>et sera "linké" avec la

bibliothèque <span style="font-style: italic;">libmystr.a</span>:<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="Style3"><strong>&gt;<code>gcc -o teststring

teststring.c -L. -lmystr</code> </strong></span><br>

<br>

le programme<span style="font-style: italic; font-weight: bold; color: #CC6600;"> teststring.c</span><span class="Style3"><strong>&nbsp;

</strong></span>commence par afficher la liste des fonctions disponibles, <br>

et demande ensuite à l'utilisateur son choix; <br>

le programme demande ensuite les arguments nécessaires pour

appeler la fonction choisie<br>

et affiche enfin le résultat.<br>

voici un exemple d'appel au programme<span style="font-style: italic;">

teststring</span>.<br>

<br>

&nbsp;&nbsp;&nbsp; <span style="font-style: italic;">&gt;teststing</span><br style="font-style: italic;">

<span style="font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp; sélectionner une fonction :</span><br style="font-style: italic;">

<span style="font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 1- mystrncpy<br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;

2- mystrncpy<br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;

......<br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;

6 - mystrchrn<br>

&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;

.....<br style="font-style: italic;">

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

choix = ? 6</span><br style="font-style: italic;">

<br style="font-style: italic;">

<span style="font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp; donner la chaîne de caractères?:&nbsp;&nbsp;

tictac</span><br style="font-style: italic;">

<span style="font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp; donner le caractère recherché ?:&nbsp;&nbsp;

c</span><br style="font-style: italic;">

<span style="font-style: italic;">&nbsp;&nbsp;&nbsp;&nbsp;

&nbsp;&nbsp;&nbsp; </span><br style="font-style: italic;">

<span style="font-style: italic;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;

&nbsp;&nbsp; résultat: il y a&nbsp; 2 occurence du

carctère c&nbsp; dans tictac.</span><br>

<br>

<hr width="800" align="left">

<br>

<p><span class="Style1"><font size="+1">Ex3&nbsp;: Manipulation des fichiers</font></span><b><i><font size="+1" color="#0000ff"><br>
</font></i></b>


  <br>



  Ecrie un programme qui prend en argument le nom d'un fichier, puis inverse les caractères de
  ce fichier et affiche le nombre de caractères inversés.  Par exemple, si votre fichier contient :
  <span style="font-style: italic;"> .suot à ruojnoB </span>, son contenu  après l'exécution du programme devient
  :<span style="font-style: italic;"> Bonjour à tous.</span>

  <br>

</p><p>

</p><hr width="800" align="left">

<br>

&nbsp;  <b><i><font color="#333333"><font size="-1"> SR01--A2022</font></font></i></b> &nbsp;<br>

<p></p>





</body></html>